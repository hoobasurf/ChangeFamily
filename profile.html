<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Profil ‚Äî 3D animaux</title>

<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.0.1/model-viewer.min.js"></script>
</head>
<body>

  <!-- MINI CIRCLE -->
  <div id="miniCircle" class="mini-circle" title="Mini avatar - draggable">
    <img id="miniAvatar" src="default.jpg" alt="mini avatar">
  </div>

  <div class="screen profile-screen">
    <h2 id="profileTitle">Mon profil</h2>

    <input id="pseudoInput" placeholder="Choisis ton pseudo" />

    <div class="create-container">
      <!-- üîß Correction : √©viter la fermeture imm√©diate -->
      <button id="openCreateMenu" class="pill-btn" onclick="event.stopPropagation()">Cr√©er</button>
    </div>

    <!-- MENU CREER -->
    <div id="createMenu" class="popup hidden" onclick="event.stopPropagation()">
      <button id="btnPhoto" class="pill-btn small-btn">Photo</button>
      <button id="btnAvatar" class="pill-btn small-btn">Avatar (Ready Player Me)</button>
      <button id="btnCreature" class="pill-btn small-btn">Cr√©ature 3D</button>
    </div>

    <!-- SOUS-MENU PHOTO -->
    <div id="menuPhoto" class="popup hidden" onclick="event.stopPropagation()">
      <button id="photoLib" class="pill-btn small-btn">Phototh√®que</button>
      <button id="takePhoto" class="pill-btn small-btn">Prendre une photo</button>
      <input id="hiddenFileChoose" type="file" accept="image/*" style="display:none">
      <input id="hiddenFile" type="file" accept="image/*" style="display:none">
    </div>

    <!-- LISTE CR√âATURES -->
    <div id="chooseCreatureMenu" class="popup hidden" onclick="event.stopPropagation()">
      <p class="small-muted">Choisis une cr√©ature ‚Äî les mod√®les c√©l√®bres demandent ton .glb</p>
      <button id="toggleView" class="pill-btn small-btn">Grille ‚áÑ Liste</button>
      <div id="creatureContainer" class="pill-row"></div>
    </div>

    <!-- CREATE CREATURE SIMPLE -->
    <div id="createCreatureMenu" class="popup hidden" onclick="event.stopPropagation()">
      <label>Couleur : <input id="colorCreature" type="color" value="#ff66ee"></label>
      <label>Taille : 
        <select id="sizeCreature">
          <option value="small">Petite</option>
          <option value="medium" selected>Moyenne</option>
          <option value="large">Grande</option>
        </select>
      </label>
      <button id="validateCreature" class="pill-btn small-btn">Valider (cr√©er)</button>
    </div>

    <!-- POSITIONS -->
    <div id="positionMenu" class="popup hidden" onclick="event.stopPropagation()">
      <p>Position de la cr√©ature :</p>
      <label><input type="radio" name="position" value="shoulder" checked/> √âpaule</label>
      <label><input type="radio" name="position" value="hand" /> Main</label>
      <label><input type="radio" name="position" value="mount" /> Monter dessus</label>
    </div>

    <!-- AVATAR 3D + ANIMAL 3D -->
    <div class="avatar-container-large">
      <model-viewer id="avatar3D" camera-controls auto-rotate ar exposure="1" shadow-intensity="1"></model-viewer>
      <model-viewer id="animal3D" camera-controls auto-rotate ar exposure="1" shadow-intensity="0.9" class="animal3d"></model-viewer>
    </div>

  </div>

  <!-- READY PLAYER ME MODAL -->
  <div id="rpmModal" class="rpm-modal hidden" onclick="event.stopPropagation()">
    <iframe id="rpmFrame"
      allow="camera *; microphone *; clipboard-write; fullscreen; xr-spatial-tracking"
      allowfullscreen
      webkitallowfullscreen
      title="Ready Player Me">
    </iframe>
    <button id="closeRpm" class="pill-btn small-btn">‚úñ</button>
  </div>

<script type="module" src="profile.js"></script>
</body>
</html>

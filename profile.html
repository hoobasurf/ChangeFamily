<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Profil — 3D animaux</title>

<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.0.1/model-viewer.min.js"></script>
</head>
<body>

  <!-- MINI CIRCLE -->
  <div id="miniCircle" class="mini-circle" title="Mini avatar - draggable">
    <img id="miniAvatar" src="default.jpg" alt="mini avatar">
  </div>

  <div class="screen profile-screen">
    <h2 id="profileTitle">Mon profil</h2>

    <input id="pseudoInput" placeholder="Choisis ton pseudo" />

    <div class="create-container">
      <button id="openCreateMenu" class="pill-btn">Créer</button>
    </div>

    <!-- MENU CREER -->
    <div id="createMenu" class="popup hidden">
      <button id="btnPhoto" class="pill-btn small-btn">Photo</button>
      <button id="btnAvatar" class="pill-btn small-btn">Avatar (Ready Player Me)</button>
      <button id="btnCreature" class="pill-btn small-btn">Créature 3D</button>
    </div>

    <!-- SOUS-MENU PHOTO -->
    <div id="menuPhoto" class="popup hidden">
      <button id="photoLib" class="pill-btn small-btn">Photothèque</button>
      <button id="takePhoto" class="pill-btn small-btn">Prendre une photo</button>
      <input id="hiddenFileChoose" type="file" accept="image/*" style="display:none">
      <input id="hiddenFile" type="file" accept="image/*" style="display:none">
    </div>

    <!-- SOUS-MENU CREATURE -->
    <div id="menuCreature" class="popup hidden">
      <button id="chooseCreature" class="pill-btn small-btn">Choisir une créature</button>
      <button id="createCreature" class="pill-btn small-btn">Créer une créature (options)</button>
    </div>

    <!-- LISTE CRÉATURES -->
    <div id="chooseCreatureMenu" class="popup hidden">
      <p class="small-muted">Choisis une créature — les modèles célèbres demandent ton .glb</p>
      <button class="pill-btn small-btn creature-btn" data-name="Pikachu" data-url="">Pikachu (fournir .glb)</button>
      <button class="pill-btn small-btn creature-btn" data-name="Dracaufeu" data-url="">Dracaufeu (fournir .glb)</button>
      <button class="pill-btn small-btn creature-btn" data-name="Evoli" data-url="">Évoli (fournir .glb)</button>
      <button class="pill-btn small-btn creature-btn" data-name="Mewtwo" data-url="">Mewtwo (fournir .glb)</button>

      <hr>

      <button class="pill-btn small-btn creature-btn" data-name="Stitch" data-url="">Stitch (fournir .glb)</button>
      <button class="pill-btn small-btn creature-btn" data-name="Simba" data-url="">Simba (fournir .glb)</button>
      <button class="pill-btn small-btn creature-btn" data-name="Vaiana" data-url="">Vaiana (fournir .glb)</button>

      <hr>

      <!-- exemples libres pour TEST (GLB publiques) -->
      <button class="pill-btn small-btn creature-btn" data-name="Fox (test)" data-url="https://rawcdn.githack.com/KhronosGroup/glTF-Sample-Models/master/2.0/Fox/glTF-Binary/Fox.glb">Fox (test)</button>
      <button class="pill-btn small-btn creature-btn" data-name="Robot (test)" data-url="https://modelviewer.dev/shared-assets/models/RobotExpressive.glb">Robot (test)</button>
      <button class="pill-btn small-btn creature-btn" data-name="Unicorn (demo)" data-url="https://modelviewer.dev/shared-assets/models/Monster.glb">Unicorn (demo)</button>
    </div>

    <!-- CREATE CREATURE SIMPLE -->
    <div id="createCreatureMenu" class="popup hidden">
      <label>Couleur : <input id="colorCreature" type="color" value="#ff66ee"></label>
      <label>Taille : 
        <select id="sizeCreature">
          <option value="small">Petite</option>
          <option value="medium" selected>Moyenne</option>
          <option value="large">Grande</option>
        </select>
      </label>
      <button id="validateCreature" class="pill-btn small-btn">Valider (créer)</button>
    </div>

    <!-- POSITIONS -->
    <div id="positionMenu" class="popup hidden">
      <p>Position de la créature :</p>
      <label><input type="radio" name="position" value="shoulder" checked/> Épaule</label>
      <label><input type="radio" name="position" value="hand" /> Main</label>
      <label><input type="radio" name="position" value="mount" /> Monter dessus</label>
    </div>

    <!-- AVATAR 3D + ANIMAL 3D -->
    <div class="avatar-container-large">
      <model-viewer id="avatar3D" camera-controls auto-rotate ar exposure="1" shadow-intensity="1"></model-viewer>

      <!-- animal3D est positionné par CSS et par JS selon la position choisie -->
      <model-viewer id="animal3D" camera-controls auto-rotate ar exposure="1" shadow-intensity="0.9" class="animal3d"></model-viewer>
    </div>

  </div>

  <!-- READY PLAYER ME (modal intégré) -->
  <div id="rpmModal" class="rpm-modal hidden">
    <iframe id="rpmFrame" allow="camera *; microphone *; clipboard-write" title="Ready Player Me"></iframe>
    <button id="closeRpm" class="pill-btn small-btn">✖</button>
  </div>

<script type="module" src="profile.js"></script>
</body>
</html>
